package Main = 
    use Math.factorial
        
    extern println: str -> unit

    pub type P = {
        d: str,
        f: str -> num -> str
    }

    pub type Option[?T] = |Some ?T, None|

    pub let None : Option[?T] = |None|

    let x = 3

    let id x : ?T -> ?T =
        x
    
    let main : infer = 
         let a = Option.Some 2 in
         #   id a

        let b = Option.Some 3 in
           match a in
            |Some x| then x,
            |None| then 0
        # let i = S {d = "asdf", f = fn x y => concat x (display_num y)} in
        #    let en = Option.Some {"asdf"} in
        #         let f = factorial (unwrap en) in
        #                i.f i.d (f)
